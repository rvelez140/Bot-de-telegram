# ğŸ—ï¸ Arquitectura del Sistema

## Diagrama de Componentes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USUARIO                                  â”‚
â”‚                    (Telegram App)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ EnvÃ­a enlace de video
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TELEGRAM API                                   â”‚
â”‚              (api.telegram.org)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Webhook/Polling
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  SERVIDOR DOCKER                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         CONTENEDOR: telegram-video-downloader             â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚           bot.py (Python)                       â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   python-telegram-bot                 â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Maneja comandos                   â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Procesa mensajes                  â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - EnvÃ­a respuestas                  â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                  â–¼                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   VideoDownloader Class               â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Detecta plataforma                â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Configura opciones                â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                  â–¼                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚            yt-dlp                     â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Extrae metadata                   â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Descarga video                    â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Procesa formato                   â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                  â”‚                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚                  â–¼                              â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           ffmpeg                      â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Convierte formatos                â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Elimina marca de agua             â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   - Optimiza video                    â”‚      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚
â”‚  â”‚  â”‚        Sistema de Archivos                      â”‚     â”‚  â”‚
â”‚  â”‚  â”‚   /downloads/  (temporal)                       â”‚     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Conecta a plataformas
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PLATAFORMAS DE VIDEO                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ TikTok   â”‚  â”‚ YouTube  â”‚  â”‚ Twitter  â”‚  â”‚Instagram â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flujo de Datos

```
1. Usuario envÃ­a enlace
         â”‚
         â–¼
2. Telegram API recibe mensaje
         â”‚
         â–¼
3. Bot recibe update via polling
         â”‚
         â–¼
4. VideoDownloader detecta plataforma
         â”‚
         â–¼
5. yt-dlp extrae metadata del video
         â”‚
         â–¼
6. yt-dlp descarga video a /downloads/
         â”‚
         â–¼
7. ffmpeg procesa video (si es necesario)
         â”‚
         â–¼
8. Bot envÃ­a video al usuario
         â”‚
         â–¼
9. Archivo temporal se elimina
```

## Estructura de Directorios en Docker

```
/app/
â”œâ”€â”€ bot.py                    # CÃ³digo principal
â”œâ”€â”€ requirements.txt          # Dependencias
â””â”€â”€ /downloads/              # Videos temporales
    â””â”€â”€ {chat_id}_{title}.mp4

/usr/local/bin/
â”œâ”€â”€ python3                  # IntÃ©rprete Python
â”œâ”€â”€ ffmpeg                   # Procesador multimedia
â””â”€â”€ pip                      # Gestor de paquetes
```

## ConfiguraciÃ³n de Docker Compose

```yaml
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     docker-compose.yml                  â”‚
â”‚                                         â”‚
â”‚  services:                              â”‚
â”‚    telegram-downloader-bot:             â”‚
â”‚      â”œâ”€â”€ build: .                       â”‚
â”‚      â”œâ”€â”€ restart: unless-stopped        â”‚
â”‚      â”œâ”€â”€ environment:                   â”‚
â”‚      â”‚   â””â”€â”€ TELEGRAM_BOT_TOKEN         â”‚
â”‚      â”œâ”€â”€ volumes:                       â”‚
â”‚      â”‚   â””â”€â”€ ./downloads:/downloads     â”‚
â”‚      â””â”€â”€ networks:                      â”‚
â”‚          â””â”€â”€ bot-network                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Proceso de Descarga Detallado

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. RECEPCIÃ“N DE URL                                      â”‚
â”‚    â””â”€> Validar formato de URL                           â”‚
â”‚        â””â”€> Extraer dominio                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. DETECCIÃ“N DE PLATAFORMA                               â”‚
â”‚    â”œâ”€> TikTok?    â†’ Configurar para sin marca de agua   â”‚
â”‚    â”œâ”€> YouTube?   â†’ Configurar calidad 1080p            â”‚
â”‚    â”œâ”€> Twitter?   â†’ Configurar formato estÃ¡ndar         â”‚
â”‚    â””â”€> Instagram? â†’ Configurar para reels/posts         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. CONFIGURACIÃ“N yt-dlp                                  â”‚
â”‚    â”œâ”€> format: Seleccionar calidad                      â”‚
â”‚    â”œâ”€> outtmpl: Definir nombre de archivo               â”‚
â”‚    â”œâ”€> max_filesize: 50MB (Telegram limit)              â”‚
â”‚    â””â”€> postprocessors: ffmpeg si necesario              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. EXTRACCIÃ“N DE METADATA                                â”‚
â”‚    â””â”€> extract_info()                                   â”‚
â”‚        â”œâ”€> TÃ­tulo del video                             â”‚
â”‚        â”œâ”€> DuraciÃ³n                                      â”‚
â”‚        â”œâ”€> URL directa de descarga                       â”‚
â”‚        â””â”€> Thumbnail                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. DESCARGA DEL VIDEO                                    â”‚
â”‚    â””â”€> Guardar en /downloads/{chat_id}_{title}.mp4      â”‚
â”‚        â”œâ”€> Mostrar progreso                             â”‚
â”‚        â””â”€> Verificar completitud                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. POST-PROCESAMIENTO                                    â”‚
â”‚    â””â”€> ffmpeg (si es necesario)                         â”‚
â”‚        â”œâ”€> Convertir formato                            â”‚
â”‚        â”œâ”€> Eliminar marca de agua (TikTok)              â”‚
â”‚        â””â”€> Optimizar tamaÃ±o                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ENVÃO A TELEGRAM                                      â”‚
â”‚    â””â”€> reply_video()                                    â”‚
â”‚        â”œâ”€> Agregar caption                              â”‚
â”‚        â”œâ”€> Habilitar streaming                          â”‚
â”‚        â””â”€> Enviar thumbnail                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 8. LIMPIEZA                                              â”‚
â”‚    â””â”€> os.remove(filename)                              â”‚
â”‚        â””â”€> Eliminar archivo temporal                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## GestiÃ³n de Memoria y Recursos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RECURSOS DEL CONTENEDOR            â”‚
â”‚                                     â”‚
â”‚  CPU:     SegÃºn configuraciÃ³n       â”‚
â”‚  RAM:     ~500MB base               â”‚
â”‚           +100-200MB por descarga   â”‚
â”‚  Disco:   Temporal durante descarga â”‚
â”‚  Red:     SegÃºn tamaÃ±o de video     â”‚
â”‚                                     â”‚
â”‚  LÃ­mites recomendados:              â”‚
â”‚  â”œâ”€ CPU: 2 cores                    â”‚
â”‚  â”œâ”€ RAM: 2GB                        â”‚
â”‚  â””â”€ Disco: 20GB                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ComunicaciÃ³n con APIs

```
Bot â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Telegram API
 â”‚  Long Polling         â”‚
 â”‚  (getUpdates)         â”‚
 â”‚                       â”‚
 â”‚  â†â”€â”€ Update          â”‚
 â”‚  â”€â”€â”€â†’ sendMessage    â”‚
 â”‚  â”€â”€â”€â†’ sendVideo      â”‚
 
Bot â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Plataformas
 â”‚                       â”‚
 â”‚  â”€â”€â”€â†’ HTTP Request   â”‚
 â”‚  â†â”€â”€ Video Stream    â”‚
 â”‚                       â”‚
```

## Manejo de Errores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIPOS DE ERROR                     â”‚
â”‚                                     â”‚
â”‚  1. Error de Red                    â”‚
â”‚     â””â”€> Reintentar 3 veces          â”‚
â”‚                                     â”‚
â”‚  2. Video No Disponible             â”‚
â”‚     â””â”€> Informar al usuario         â”‚
â”‚                                     â”‚
â”‚  3. TamaÃ±o Excedido                 â”‚
â”‚     â””â”€> Sugerir otra calidad        â”‚
â”‚                                     â”‚
â”‚  4. Token InvÃ¡lido                  â”‚
â”‚     â””â”€> Detener bot / Log error     â”‚
â”‚                                     â”‚
â”‚  5. Plataforma No Soportada         â”‚
â”‚     â””â”€> Listar plataformas vÃ¡lidas  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Logs y Monitoreo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SISTEMA DE LOGS                       â”‚
â”‚                                        â”‚
â”‚  stdout  â”€â†’  Docker Logs               â”‚
â”‚  stderr  â”€â†’  Docker Logs               â”‚
â”‚                                        â”‚
â”‚  RotaciÃ³n automÃ¡tica:                  â”‚
â”‚  â”œâ”€ TamaÃ±o mÃ¡ximo: 10MB                â”‚
â”‚  â””â”€ Archivos: 3                        â”‚
â”‚                                        â”‚
â”‚  Niveles:                              â”‚
â”‚  â”œâ”€ INFO:  Operaciones normales        â”‚
â”‚  â”œâ”€ ERROR: Errores recuperables        â”‚
â”‚  â””â”€ DEBUG: InformaciÃ³n detallada       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ventajas de la Arquitectura

âœ… **Aislamiento**: Docker mantiene el bot aislado del sistema
âœ… **Portabilidad**: Funciona en cualquier servidor con Docker
âœ… **Escalabilidad**: FÃ¡cil de replicar en mÃºltiples instancias
âœ… **Mantenimiento**: Actualizaciones simples con rebuild
âœ… **Seguridad**: Contenedor con permisos limitados
âœ… **Recursos**: LÃ­mites configurables de CPU/RAM

## Consideraciones de Seguridad

ğŸ”’ Token almacenado en variable de entorno
ğŸ”’ Archivos temporales eliminados despuÃ©s de uso
ğŸ”’ Sin almacenamiento persistente de videos
ğŸ”’ Contenedor con usuario no-root
ğŸ”’ Red aislada para el contenedor
